<!DOCTYPE html>
  <!-- HOLA DIEGO/CÉSAR, NO CREO QUE NINGUNA OTRA PERSONA ENTRE A VER EL CÓDIGO, SI TENEIS ALGUNA SUGERENCIA PARA MEJORAR LA PÁGINA LET ME KNOW. ¡SALUDOS TELEQUILES!-->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="shortcut icon" href="./img/balloon.png">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>G&J</title>
        <meta name="description" content="Giorgia and Jose&#39;s wedding website">
        <meta name="viewport" content="width=device-width">
        <!-- Form style css-->
        <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/pure-min.css" integrity="sha384-nn4HPE8lTHyVtfCBi5yW9d20FjT8BJwUXyWZT9InLYax14RDjBj46LmSztkmNP9w" crossorigin="anonymous">
        <link rel="stylesheet" href="./wedding_files/normalize.css">
        <link rel="stylesheet" href="./wedding_files/main.css">

        <script src="./wedding_files/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
        <script src="./wedding_files/plugins.js"></script>
        <script src="./wedding_files/main.js"></script>

        <script data-cfasync="false" type="text/javascript" src="./wedding_files/form-submission-handler.js"></script>
        <script type="text/javascript">
          function show()
          {
              document.getElementById('guests').style.display="block";
              document.getElementById('events').style.display="block";
              document.getElementById('Address').style.display="block";
              var message = document.getElementById('message');
              message.innerHTML = 'Thank you for your reply.<br><br>See you on the big day!';
          }
          function hide()
          {
              document.getElementById('guests').style.display="none";
              document.getElementById('events').style.display="none";
              document.getElementById('Address').style.display="none";
              var message = document.getElementById('message');
              message.innerHTML = 'Thank you for your reply!<br><br>We will miss you.';
          }
          function check()
          {
              var elm_dinner = document.getElementById('Dinner');
              var elm_brunch = document.getElementById('Brunch');
              if (elm_dinner.checked) {
                  elm_dinner.value="Yes";
             }
              else{
                  elm_dinner.value="No";
              }
              if (elm_brunch.checked) {
                  elm_brunch.value="Yes";
              }
              else{
                  elm_brunch.value="No";
              }
          }
          function check_injection()
          {
              document.getElementById("Name").value = document.getElementById("Name").value.replace(/=/g,"");
              document.getElementById("Name").value = document.getElementById("Name").value.replace(/-/g,"");
              document.getElementById("Name").value = document.getElementById("Name").value.replace(/+/g,"");
              document.getElementById("Name").value = document.getElementById("Name").value.replace(/@/g,"");
              
              document.getElementById("paddress").value = document.getElementById("paddress").value.replace(/=/g,"");
              document.getElementById("paddress").value = document.getElementById("paddress").value.replace(/-/g,"");
              document.getElementById("paddress").value = document.getElementById("paddress").value.replace(/+/g,"");
              document.getElementById("paddress").value = document.getElementById("paddress").value.replace(/@/g,"");
          }
</script>
    <style>
        /*Preload of images to avoid blinking when hovering over the images*/
        /*TO DO: This can be improved using sprites to reduce HTML requests*/
        body:after{
        content:
        url('./img/ribbon.png')
        url('./img/balloon_default.png')
        url('./img/balloon_smiling.png')
        url("./img/thebigday_hover.png")
        url("./img/cincin_hover.png")
        url("./img/lord_calendar.png")
        url("./img/accomodation_hover.png")
        url('./img/ribbon@2x.png')
        url('./img/balloon_default@2x.png')
        url('./img/balloon_smiling@2x.png')
        url("./img/cincin_hover@2x.png")
        url("./img/thebigday_hover@2x.png")
        url("./img/lord_calendar@2x.png")
        url("./img/accomodation_hover@2x.png");
        url("./img/Fireworks.m4v");
        display:none;
    }
    </style>
    </head>
    <body data-gr-c-s-loaded="true" style="">
        <div onclick="" id="balloon" class="soaring"><a></a></div>
        <div id="language-switcher-es" class="cloud cloud-1"><a href="http://josedearcos.com/wedding/es/boda.htm" title="Spanish">Español</a></div>
        <div id="language-switcher-it" class="cloud cloud-2"><a href="http://josedearcos.com/wedding/it/matrimonio.htm" title="Italian">Italiano</a></div>
        <header><div id="ribbon"></div></header>
        <div id="zone-where" class="moment first">
            &nbsp;
            <p class="scroll-hint">Scroll down</p>
            <p class="left"><strong>It's about time!</strong>We are getting married in beautiful <b>Italy</b> and we'd love to share with you such a special day. </p>
            <div onclick="" id="rings"><a></a></div>
        </div>
        <div id="zone-venue" class="moment">
            &nbsp;
            <p class="right"><strong>The big day</strong>
            Following the afternoon ceremony, we will continue the festivities in the enchanting wine region of <a href="https://goo.gl/maps/tw1MpGyDPPJ2" target="_blank"><b><u>Monferrato</u></b></a> <abbr data-toggle="tooltip" title="i.e., until 1 am.">all night long.</abbr> </p>
            <div onclick="" id="bigday"><a></a></div>
            <audio id="wedding_music" src="./img/WeddingMarch.mp3"  preload="auto"></audio>
        </div>
        <div id="zone-eventi" class="moment">
         &nbsp;
         <p class="left"><strong>A weekend of celebration</strong>As many of you are not local, we have organized a variety of fine events and activities. We will provide a complete list later on. The two main events will be:<br><br> <b>The rehersal dinner</b><br> <i>Saturday August 31<sup>st</i><br><br> <b>Brunch (wine tasting)</b> <br><i>Monday September 2<sup>nd</i> <br><br>More details to come.</p>
            <div onclick="" id="cincin"><a></a></div>
         </div>
        <div id="zone-hotels" class="moment">
            &nbsp;
            <p class="right"><strong>Where to stay?</strong> You'll have plenty of options to stay in the city of <b>Turin</b> or go to one of Monferrato's <i>agriturismi</i>. <br><br> We'll add some suggestions soon, we'll keep you updated!</p>
            <div onclick="" id="hotels"><a></a></div>
        </div>
        <div id="zone-form" class="moment last">
            <h2 style="margin-left:50px;"><strong>RSVP</strong></h2>
            <form class="gform pure-form pure-form-stacked" id="form_center" method="POST" action="https://script.google.com/macros/s/AKfycbzU2jx5U1GYHN1JdPEAM6xAfV8L321et6wkS-vQ/exec">
                <div class="form-elements">
                    <fieldset class="pure-group">
                        <label for="Name"><h4>Name:</h4></label>
                        <input required class="form_center" id="Name" name="Name" placeholder=""/>
                    </fieldset>
                    <fieldset class="pure-group">
                        <label for="Email"><h4>Your e-mail address:</h4></label>
                        <input required class="form_center" id="Email" name="Email" type="Email" value=""
                        required placeholder=""/>
                        <span class="email-invalid" style="display:none">
                            Must be a valid email address</span>
                    </fieldset>
                    <fieldset class="pure-checkbox">
                        <h4>Confirmation</h4>
                        <label for="Confirmation-Yes" class="pure-radio clickElement">
                            <input class="clickElement" id="Confirmation-Yes" type="radio" name="Confirmation" onClick="" value="Yes">
                                I'm attending
                        </label>
                        <label for="Confirmation-No" class="pure-radio clickElement">
                            <input class="clickElement" id="Confirmation-No" type="radio" name="Confirmation" onClick="" value="No" >
                                I cannot make it
                        	</label>
                    </fieldset>
                    <fieldset class="pure-group" id="Address" style="margin-top:-15px;display:none;">
                        <label for="paddress"><h4>Address:</h4></label>
                        <input class="form_center" type="text" id="paddress" name="paddress" value="" placeholder="Where should we send the invitation?"/>
                    </fieldset>
                    <fieldset class="pure-group" id="guests" style="display:none;">
                        <label for="Guest"><h4>How many guests are attending?</h4></label>
                        <select name="Guest" class="form_center" id="Guest">
                            <option name="Guest" value="0" selected hidden>Select here</option>
                            <option name="Guest" value="1">Just me (1)</option>
                            <option name="Guest" value="2">Me and a guest (2)</option>
                            <option name="Guest" value="3">Family (3)</option>
                            <option name="Guest" value="4">Family (4)</option>
                            <option name="Gue   st" value="5">Family (5)</option>
                        </select>
                    </fieldset>
                    <fieldset class="pure-checkbox" id="events" style="display:none;">
                        <h4>Do you want to be part of the following events?</h4>
                        <label for="Dinner" class="pure-checkbox">
                            <input name="Dinner" id="Dinner" type="checkbox"  value="No" onCLick="check()">
                               Saturday Rehersal dinner
                        </label>
                        <label for="Brunch" class="pure-checkbox">
                            <input name="Brunch" id="Brunch" type="checkbox"  value="No" onCLick="check()" >
                                Monday Brunch (Wine tasting)
                        </label>
                    </fieldset>
                    <button class="button-success pure-button button-xlarge" id="button-send"><i class="fa fa-paper-plane"></i>&nbsp;Send</button>
                </div>
                <div class="thankyou_message" style="display:none;"><h2 id='message'></h2></div>
            </form>
        </div>
        <div style="margin-top:-15em;border: none !important;">
            <img class="poster" src="./img/newground_orange.png"/><video id="video_fire_works" src="./img/Fireworks_1024_compressed.mov" onplay="setVideoBgColorDelayed(this,[1, 37, 82])" oncanplay="setVideoBgColorDelayed(this,[1, 37, 82])" playsinline autoplay preload="auto" loop muted></video>
        </div>
        <script>
        $( document ).ready(function() {
            $('#Confirmation-No').bind('touchstart click', function(e) {
                                     e.stopPropagation(); //stops propagation
                                     hide();
            });
            
            $('#Confirmation-Yes').bind('touchstart click', function(e) {
                                      e.stopPropagation(); //stops propagation
                                      show();
            });
        });
        
        $(window).load(function() {
            document.getElementById('video_fire_works').play();
        });
        
        count = false;
        var audio =  $("#wedding_music")[0];
        $("#bigday").mouseenter(function() {
                                if(count==false)
                                {
                                audio.volume = 0.05;
                                audio.play();
                                count=true;
                                }
                                });
        </script>
        <script>
            /* Crazy fix for the different rending of colors depending on browser and GPU optimization*/
            
            // Detect which browser prefix to use for the specified CSS value
            // (e.g., background-image: -moz-linear-gradient(...);
            //        background-image:   -o-linear-gradient(...); etc).
            //
            
            
            // Setting the gradient with the proper prefix
            function isColorInRange(expectedColor, givenColor) {
                const THRESHOLD = 40;
                for (var i = 0; i < 3; i++) {
                    if (((expectedColor[i] - THRESHOLD) > givenColor[i])
                        || ((expectedColor[i] + THRESHOLD) < givenColor[i])) {
                        return false;
                    }
                }
                return true;
            }
        
        function getCssValuePrefix()
        {
            var rtrnVal = '';//default to standard syntax
            var prefixes = ['','-o-', '-ms-', '-moz-', '-webkit-'];
            
            // Create a temporary DOM object for testing
            var dom = document.createElement('div');
            
            for (var i = 0; i < prefixes.length; i++)
            {
                // Attempt to set the style
                dom.style.background = prefixes[i] + 'linear-gradient(#74c1fe, #012552)';
                
                // Detect if the style was successfully set
                if (dom.style.background)
                {
                    rtrnVal = prefixes[i];
                }
            }
            
            dom = null;
            delete dom;
            
            return rtrnVal;
        }
        
        function setVideoBgColor(vid, nativeColor) {
            if (vid) {
                var dom_main = document.getElementsByTagName("body")[0];;
                
                if (dom_main) {
                    // draw first pixel of video to a canvas
                    // then get pixel color from that canvas
                    
                    var canvas = document.createElement("canvas");
                    canvas.width = 1;
                    canvas.height = 1;
                    var ctx = canvas.getContext("2d");
                    ctx.drawImage(vid, 0, 0, 1, 1);
                    
                    var p = ctx.getImageData(0, 0, 1, 1).data;
                    //console.log("rgb(" + p[0] + "," + p[1] + "," + p[2] + ")");
                    if (isColorInRange(nativeColor, p)) {
                        
                        dom_main.style.background = 'linear-gradient(to bottom, #74c1fe 0%, #a7d3db 25%, lightskyblue 50%, rgb(' + 255 + ',' + p[1] + ',' + p[2] + ') 75%)';
                        
                        console.log(getCssValuePrefix() + 'linear-gradient(to bottom, #74c1fe 0%, #a7d3db 25%, lightskyblue 50%, rgb(' + p[0] + ',' + p[1] + ',' + p[2] + ') 75%)');
                        
                    }
                }
            }
        }
        
        function setVideoBgColorDelayed(vid, nativeColor) {
            setTimeout(setVideoBgColor, 100, vid, nativeColor);
        }
        
            </script>
</body></html>
